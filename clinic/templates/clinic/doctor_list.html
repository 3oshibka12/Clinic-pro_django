{% extends 'clinic/base.html' %}

{% block content %}
<style>
    .page-header {
        text-align: center;
        margin-bottom: 20px;
        padding: 40px 20px 20px;
        background: white;
        box-shadow: 0 2px 10px rgba(0,0,0,0.03);
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–∞–Ω–µ–ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ */
    .filter-bar {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        max-width: 800px;
        margin: 0 auto 40px;
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
        border: 1px solid #e9ecef;
    }

    .filter-bar select {
        padding: 10px;
        border: 1px solid #ced4da;
        border-radius: 5px;
        min-width: 200px;
    }

    .doctors-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 25px;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    .doc-card {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        transition: transform 0.3s, box-shadow 0.3s;
        display: flex;
        flex-direction: column;
    }

    .doc-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }

    .doc-header {
        background: #e3f2fd;
        padding: 20px;
        text-align: center;
        font-size: 3rem;
    }

    .doc-body {
        padding: 20px;
        flex: 1; 
        text-align: center;
    }

    .doc-name { font-size: 1.2rem; font-weight: bold; margin-bottom: 5px; color: #333; }
    .doc-spec { color: #007bff; font-weight: 600; margin-bottom: 15px; }
    .doc-region { font-size: 0.9rem; color: #666; background: #f8f9fa; display: inline-block; padding: 4px 10px; border-radius: 15px; }

    .doc-footer {
        padding: 20px;
        border-top: 1px solid #eee;
        text-align: center;
    }
</style>

<div class="page-header">
    <h1>–ù–∞—à–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã</h1>
    <p style="color: gray;">–ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –≤—Ä–∞—á–∞</p>
</div>

<!-- –§–û–†–ú–ê –§–ò–õ–¨–¢–†–ê–¶–ò–ò -->
<form method="get" class="filter-bar">
    
    <!-- –§–∏–ª—å—Ç—Ä –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ -->
    <select name="spec" onchange="this.form.submit()">
        <option value="">üìã –í—Å–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</option>
        {% for spec in specializations %}
            <option value="{{ spec }}" {% if spec == selected_spec %}selected{% endif %}>
                {{ spec }}
            </option>
        {% endfor %}
    </select>

    <!-- –§–∏–ª—å—Ç—Ä –ø–æ —Ä–µ–≥–∏–æ–Ω—É -->
    <select name="region" onchange="this.form.submit()">
        <option value="">üìç –í—Å–µ —É—á–∞—Å—Ç–∫–∏</option>
        {% for region in regions %}
            <option value="{{ region }}" {% if region == selected_region %}selected{% endif %}>
                –£—á–∞—Å—Ç–æ–∫ ‚Ññ{{ region }}
            </option>
        {% endfor %}
    </select>
    
    <!-- –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ (–µ—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã) -->
    {% if selected_spec or selected_region %}
        <a href="{% url 'doctor_list' %}" class="btn" style="background: #dc3545; color: white; padding: 10px 15px; font-size: 0.9rem;">
            ‚úñ –°–±—Ä–æ—Å–∏—Ç—å
        </a>
    {% endif %}
</form>

<!-- –°–ü–ò–°–û–ö –í–†–ê–ß–ï–ô -->
<div class="doctors-grid">
    {% for doctor in doctors %}
    <div class="doc-card">
        <div class="doc-header">
            <!-- –ï—Å–ª–∏ –ø–æ—á–∏–Ω–∏–ª –∏–∫–æ–Ω–∫–∏, —Å—Ç–∞–≤—å <i class="fa-solid fa-user-doctor"></i> -->
            üë®‚Äç‚öïÔ∏è
        </div>
        <div class="doc-body">
            <div class="doc-name">{{ doctor.lname }} {{ doctor.fname }}</div>
            <div class="doc-spec">{{ doctor.specialization }}</div>
            <div class="doc-region">üìç –£—á–∞—Å—Ç–æ–∫ ‚Ññ{{ doctor.region }}</div>
        </div>
        <div class="doc-footer">
            <a href="{% url 'doctor_schedule' doctor.id_doc %}" class="btn btn-outline" style="width: 100%; box-sizing: border-box;">
                –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
            </a>
        </div>
    </div>
    {% empty %}
        <div style="width: 100%; text-align: center; grid-column: 1 / -1; padding: 40px; color: gray;">
            <h3>–ù–∏–∫–æ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üòî</h3>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞.</p>
        </div>
    {% endfor %}
</div>
{% endblock %}