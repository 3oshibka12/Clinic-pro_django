# ClinicPro — Медицинская Информационная Система

Веб-приложение для автоматизации работы клиники. Система управляет записью пациентов, расписанием врачей, ведением истории болезней и аналитикой.

**Ключевая особенность:** Реализована защита данных на уровне базы данных (Row Level Security) и ролевая модель доступа через PostgreSQL.

---

## Технологический стек
- **Backend:** Python 3.11, Django 5.0
- **Database:** PostgreSQL 16 (RLS, Triggers, Stored Procedures, Views)
- **Frontend:** HTML5, CSS3, Django Templates

---

## Функционал
1. **Ролевая модель:**
   - **Пациент:** Поиск врачей, онлайн-запись, просмотр истории посещений и рецептов, отмена записей.
   - **Врач:** Просмотр расписания, управление приемами (сегодня/архив), назначение лечения.
   - **Регистратор:** Управление графиком работы, редактирование/перенос записей.
   - **Аналитик:** Просмотр статистики загруженности врачей (через SQL View).

2. **Архитектурные решения:**
   - **RLS (Row Level Security):** Физическое разграничение доступа к строкам в БД.
   - **Middleware:** Переключение ролей PostgreSQL (`SET ROLE`) в рамках одной сессии Django.
   - **Triggers:** Автоматическое логирование изменений записей в таблицу истории.
   - **SQL Views:** Формирование сложных отчетов на стороне БД.

---

## Установка и запуск

**Клонирование репозитория:**
```bash
git clone https://github.com/3oshibka12/Clinic-pro_django
cd clinic-pro
```
**Создание виртуального окружения:**

```bash
python -m venv venv
source venv/bin/activate
```  
**Установка зависимостей:**

```bash
pip install -r requirements.txt
```

**Настройка Базы Данных:**

- Создайте базу данных в PostgreSQL.
- Выполните SQL-скрипты из папки scripts_db (создание ролей, политик RLS, триггеров).
- Настройте settings.py.

**Миграции и запуск:**

```bash
python manage.py migrate
python manage.py runserver
```